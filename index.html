<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Stock Position Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .calculator {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .input-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      input {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }
      button {
        background-color: #4caf50;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
      }
      button:hover {
        background-color: #45a049;
      }
      .result {
        margin-top: 20px;
        padding: 15px;
        background-color: #e8f5e9;
        border-radius: 4px;
        display: none;
      }
      .info {
        font-size: 0.9em;
        color: #666;
        margin-top: 4px;
      }
    </style>
  </head>
  <body>
    <div class="calculator">
      <h2>Stock Position Calculator</h2>
      <div class="input-group">
        <label>Maximum Risk Amount (EGP):</label>
        <input type="number" id="riskAmount" step="0.01" placeholder="Enter amount you're willing to risk" />
        <div class="info">Enter the maximum amount you're willing to risk in EGP</div>
      </div>
      <div class="input-group">
        <label>Entry Price (EGP):</label>
        <input type="number" id="entryPrice" step="0.01" placeholder="Enter stock entry price" />
        <div class="info">Current or expected entry price of the stock</div>
      </div>
      <div class="input-group">
        <label>Stop Loss Percentage (%):</label>
        <input type="number" id="stopLossPercent" step="0.01" placeholder="Enter stop loss percentage" />
        <div class="info">How many percent below entry price to set stop loss (e.g., 2.5 for 2.5%)</div>
      </div>
      <button onclick="calculate()">Calculate Position</button>
      <div id="result" class="result"></div>
    </div>

    <script>
      function calculate() {
        const riskAmount = parseFloat(document.getElementById("riskAmount").value);
        const entryPrice = parseFloat(document.getElementById("entryPrice").value);
        const stopLossPercent = parseFloat(document.getElementById("stopLossPercent").value);

        if (!riskAmount || !entryPrice || !stopLossPercent) {
          alert("Please fill in all fields");
          return;
        }

        if (stopLossPercent <= 0) {
          alert("Stop loss percentage must be greater than 0");
          return;
        }

        // Calculate stop loss price based on percentage
        const stopLossPrice = entryPrice * (1 - stopLossPercent / 100);
        const riskPerShare = entryPrice - stopLossPrice;

        // Calculate position size
        const shares = Math.floor(riskAmount / riskPerShare);
        const totalInvestment = shares * entryPrice;
        const actualRisk = shares * riskPerShare;

        const result = document.getElementById("result");
        result.style.display = "block";
        result.innerHTML = `
                <h3>Position Details:</h3>
                <p>Number of shares to buy: ${shares.toFixed(0)}</p>
                <p>Total investment needed: ${totalInvestment.toFixed(2)} EGP</p>
                <p>Stop Loss Price: ${stopLossPrice.toFixed(2)} EGP</p>
                <p>Risk per share: ${riskPerShare.toFixed(2)} EGP</p>
                <p>Actual risk amount: ${actualRisk.toFixed(2)} EGP</p>
            `;
      }
    </script>
  </body>
</html>
